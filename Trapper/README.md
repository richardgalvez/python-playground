# ğŸ§© Trapper

*Started: 5/8/2025 â€” Completed: 5/19/2025*

*Generated by Code Copilot (ChatGPT)*

**Difficulty:** Intermediate++ to Advanced

**Tags:** FastAPI, PostgreSQL, Authentication, HTML Forms, Jinja2, Docker Compose, SQLAlchemy, Full Stack, Web App


**Notes**:

- bcrypt set to 4.0.1 due to the warning issues regarding missing '__about__'.

## ğŸ§  Project Goal

Build a **containerized, full-stack web app** for tracking software issues or bug reports. Users will be able to **register, log in, create and resolve issues**, and view their own reports via a clean HTML interface.

This is a **realistic end-to-end web system** involving:

- API routing

- Database modeling

- Session-based user authentication

- Templated HTML rendering

- Secure password handling

- Dockerized service deployment

## ğŸŒ Tech Stack

- **FastAPI** (web framework, routing, form handling)

- **Jinja2 Templates + HTML + Bootstrap** (basic frontend)

- **PostgreSQL** (database)

- **SQLAlchemy** (ORM)

- **Pydantic** (validation)

- **Passlib / bcrypt** (password hashing)

- **Docker + Docker Compose** (to run API + DB in containers)

## ğŸ“ Functional Requirements

### User Authentication

- **GET /register** â†’ Registration form

- **POST /register** â†’ Create user account

- **GET /login** â†’ Login form

- **POST /login** â†’ Authenticate user and start session

- **GET /logout** â†’ End session and redirect to homepage

- Store user sessions using **signed cookies or dependency injection**

## Issue Management

- **GET /** â†’ Homepage with all issues for the logged-in user

- **GET /report** â†’ New issue form

- **POST /report** â†’ Create new issue for current user

- **GET /issues/{id}** â†’ View issue detail page

- **POST /issues/{id}/resolve** â†’ Mark an issue as resolved

- All actions must be **scoped to the current user**

## ğŸ—ƒï¸ Database Models

### User

- `id`: auto-increment

- `username`: str (unique, required)

- `hashed_password`: str (store securely with hashing)

- `created_at`: datetime

### Issue

- `id`: auto-increment

- `title`: str (required)

- `description`: str (required)

- `priority`: str (`low`, `medium`, `high`)

- `status`: str (`open`, `resolved`, default: `open`)

- `user_id`: foreign key to `User`

- `created_at`: datetime

## ğŸ“¦ Docker Setup

Use **Docker Compose** to spin up:

- FastAPI backend (`app` service)

- PostgreSQL database (`db` service)

### File Requirements

- `Dockerfile` for building the FastAPI app

- `docker-compose.yaml` with app + db config

- `.env` for config secrets and DB connection string

- On container startup, app must auto-connect and create tables

## ğŸ–¼ï¸ HTML Templates

### `/login` and `/register`

- Forms with username/password

- Redirect on success or show error

### `/` (Dashboard)

- List of userâ€™s issues:

    - Title, priority, status

    - â€œViewâ€ and â€œResolveâ€ actions

`/report`

- Form to create new issue

`/issues/{id}`

- Full issue detail with resolve option if still open

## âœ… Validation & Rules

- Passwords must be hashed â€” never stored in plain text

- Only logged-in users can access issue-related routes

- Users cannot see or modify each otherâ€™s issues

- All templates must reflect status and priority visually

- Invalid logins show errors (donâ€™t crash)

## ğŸ’¡ Example User Flow

```txt
1. User registers at /register  
2. Logs in via /login (session starts)  
3. Visits / and sees their open issues  
4. Reports a bug via /report  
5. Views the issue at /issues/{id}  
6. Resolves it via a button â†’ /issues/{id}/resolve  
7. Logs out via /logout
```

## ğŸ’» This Project Helps You Practice:

- Session-based authentication with password hashing

- Secure route protection (`@authenticated`)

- Modeling user-owned resources

- Creating a fully containerized dev environment

- Building frontend views from backend state

- Deploying FastAPI + Postgres together in a real setup
