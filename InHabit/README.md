# 🧩 InHabit

*Started: 5/1/2025 — Completed: 5/7/2025*

*Generated by Code Copilot (ChatGPT)*

**Difficulty:** Medium+

**Tags:** FastAPI, REST API, SQLite, SQLAlchemy, Relational Data Modeling, Pydantic, JSON Responses, Backend Development

You are tasked with building a **backend API** for a habit tracking system. Users will be able to **create habits**, **log their completion**, and **track progress over time**, including a streak counter for consecutive days.

This will give you experience working with **FastAPI**, **relational data modeling**, and **RESTful route design** — essential for any real-world, API-driven app or service.

## 🌐 Tech Stack

- **FastAPI** (API framework for backend routing and JSON response handling)

- **SQLite** (local database persistence)

- **SQLAlchemy** (for relational ORM modeling)

- **Pydantic** (request/response models)

- **Swagger UI** (`/docs`) for endpoint testing

## 📝 Functional Requirements

Implement the following **REST API routes**:

```txt
POST   /habits                     → Create a new habit
GET    /habits                     → List all habits
GET    /habits/{habit_id}         → Get details for a single habit
POST   /habits/{habit_id}/log     → Log today's completion for a habit
GET    /habits/{habit_id}/streak  → Get the current completion streak
```

## 📚 Habit Table

Each habit should store:

- `id`: auto-generated (integer primary key)

- `name`: str (required)

- `description`: str (optional)

- `created_at`: datetime (auto-set on creation)

## 🔁 HabitLog Table

SQLite does not support using arrays in columns to capture this value. This will use a separate table instead.

Track each time a habit is completed. Each log entry should include:

- `id`: auto-generated

- `habit_id`: foreign key (links to a habit)

- `logged_date`: date (ISO format)

## 🔄 One-to-Many Relationship

- A **Habit** can have **many HabitLog entries**

- You will query and calculate streaks using the log table


## 🎯 Core Logic

- When a user **logs** a habit:
  
  - Insert a new row into `HabitLog` with today’s date and the habit’s ID
  
  - Ensure there is **only one log per habit per day**

- When requesting a streak:

  - Return the count of **consecutive days**, including/up to today, with logs

- Return **structured JSON** in all responses

- Use FastAPI’s **status codes** and built-in validation (e.g. 201 for creation, 404 for not found, 422 on invalid input, etc.)

## ✅ Input Validation & API Rules

- `name` must be present when creating a habit (required)

- Logging is only allowed **once per habit per day**, should be prevented (via uniqueness or manual check)

- Habit `id` must be valid in all requests

- When logging or streak-checking a habit that doesn’t exist, return **404 Not Found**

- All inputs and outputs should be validated using **Pydantic models**

## 🧪 Example JSON Interactions

**POST /habits**

```json
{
  "name": "Drink Water",
  "description": "2L every day"
}
```

**GET /habits**

```json
[
  {
    "id": 1,
    "name": "Drink Water",
    "description": "2L every day",
    "created_at": "2025-05-01T10:00:00"
  }
]

```

**POST /habits/1/log**

```json
{
  "message": "Habit logged for today"
}
```

**GET /habits/1/streak**

```json
{
  "habit_id": 1,
  "current_streak": 3
}
```

## 💡 Sample Flow

```bash
1. Create a new habit → POST /habits
2. Log the habit daily → POST /habits/{id}/log
3. View streaks → GET /habits/{id}/streak
4. List or view habits → GET /habits, GET /habits/{id}
```

## 💻 This Project Helps You Practice:

- Designing clean RESTful APIs

- FastAPI route structure and data validation

- Modeling relational data in SQLAlchemy

- Querying and modifying relational data

- Streak logic and date math (via `datetime`)

- API schema validation using Pydantic

- Testing APIs using Swagger UI

